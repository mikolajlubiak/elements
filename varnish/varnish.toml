type = 'pod'

run-cmd = ['/usr/local/bin/docker-varnish-entrypoint']
apply-variables-on-files = ["/etc/varnish/default.vcl"]
run-writable-file-system = true

[build]
type = "script"
script = """
    FROM varnish:7.3.0
    COPY varnish/default.vcl /etc/varnish/
    """

[storage.'/var/lib/varnish']
type = 'temp'
max-size-mb = 100

[expose.80]
type = 'http'

[expose.8443]
type = 'tcp'
probe.disable = true

[variables]
BackendPort = "80"
BackendDomain = "wordpress"
